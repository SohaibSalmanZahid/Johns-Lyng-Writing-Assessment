@if (isAddingNewTask) {
  <app-add-new-todo
    [selectedUserId]="selectedUser"
    (cancelTask)="onCancelTask()"
    (addTodoTask)="onSubmitNewTask($event)"
  />
}

<h2>{{ todoSubTitle }}</h2>
<button (click)="onStartAddNewToDo()">Add New ToDo Task</button>

@if (isLoadingTask && !errorMessage) {
  <p>Loading User Tasks...</p>
}

@if (isAddingNewTask && !errorMessage) {
  <p>Adding New User Task...</p>
}
@if (isDeletingTask && !errorMessage) {
  <p>Completing User Task...</p>
}

@if (errorMessage) {
  <p class="fallback-text">{{ errorMessage }}</p>
}

@if (selectedUserTasks.length > 0) {
  <ul class="todolist-group">
    @for (task of selectedUserTasks; track task.taskId) {
      <li>
        <app-todo [todoTask]="task" (taskCompleted)="onCompleteTask($event)" />
      </li>
    }
  </ul>
} @else if (selectedUserTasks.length === 0 && !errorMessage) {
  <p class="task-fallback">No tasks found. Click ‘Add New ToDo Task’ to get started.</p>
}
